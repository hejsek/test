<div id="moon"><div class="shadow"></div></div>
<div id="particles-js"></div>
<div id="fireflies-js"></div>
<div id="story-container" class="container text-center mt-5">
  <h1 class="mb-4">Bedtime Story Reader</h1>
  <div class="input-group justify-content-center mb-3">
    <input
      type="text"
      class="form-control w-auto"
      [(ngModel)]="prompt"
      placeholder="Enter your bedtime story prompt"
    />
    <button class="btn btn-primary" (click)="generate()" [disabled]="loading">
      <span
        *ngIf="loading"
        class="spinner-border spinner-border-sm me-2"
        role="status"
      ></span>
      Read
    </button>
  </div>
  <div *ngIf="audioUrl" class="mt-4">
    <div class="audio-container">
      <audio
        #player
        controls
        [src]="audioUrl"
        class="w-100"
        (timeupdate)="onTimeUpdate()"
        (ended)="onEnded()"
      ></audio>
    </div>
    <div class="text-display">
      <span
        *ngFor="let word of words; let i = index"
        [class.highlight]="i === currentWordIndex"
        >{{ word }} </span
      >
    </div>
  </div>
</div>
